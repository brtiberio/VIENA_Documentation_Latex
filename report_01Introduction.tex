%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                                      %
%     File: Thesis_01Introduction.tex                                  %
%     Tex Master: Thesis.tex                                           %
%                                                                      %
%     Author: Bruno Tib√©rio                                            %
%     Last modified :  1 Jul 2017                                      %
%                                                                      %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\chapter{Introduction}
\label{chapter:introduction}

\gls{IST} is currently developing research in autonomous electrical vehicles, namely converting from commercial vehicles with upgraded power management.
This provides a motivating/attracting setup for new students and a testbed for industry solutions and it is the main motivation for this work.

The main goal of the project is a conversion of an electrical car (Fiat Elettra) property of \gls{IST} into an autonomous vehicle as framework for future projects or research in this field and also energy efficiency. Within the conversion, researchers, student and collaborators knowledge acquired during academic cycle is put into test and evaluated in a real situation. 

With environmental issues and technological waste in mind, this project has
also been focused on the reuse of parts and material from
other \gls{IST} projects by the simple fact that they have been replaced by improved versions or will no longer serve the current goals of those projects. Not only it is given a new propose for those parts but it will also allow the cost reduction.

This guide aims to be auxiliary documentation and future memory source as part of the \gls{IST} project named \gls{VIENA} and as well as final report for fellowship BL43/2018. 

Although all the instructions are given based on Linux operating system, they should be similar to any other \gls{OS} and the majority of code developed is made in Python, intending to be as much cross-platform as possible.




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Guide Outline}
\label{section:outline} 

This documentation guide is organized in five main chapters, Code guidelines, server, batteries and controllers which include steering controller and power train controller.
In chapter code guidelines is described suggested and used assumption especially focused in code structuring and tools used in development.
In the server is provided information about the used hardware, designed pieces, software configuration needed to get started and connections.
In controllers will be reported mainly hardware controllers and software necessary to connect, configure  or communicate with it. The used controllers are a Maxon \gls{EPOS} device to control the steering wheel and the Siemens CU-320P with companion frequency inverter for controlling the motor of the car.
The battery chapter will focus mainly on the high voltage \gls{DC} pack, necessary as a supply for frequency inverter.


 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Contributions}
\label{section:contributions}

During the fellowship BL43/2018, it was made the main contributions:
\begin{enumerate}
	\tightlist
	\item Development of 3D printed parts for allowing the control of steering wheel without disassembling or violating the integrity of steering shaft column
	\item Development of a library in Python based on CAN bus protocol to enable interconnection between software and hardware to control the steering wheel.
	\item Development of prototype circuit to add CAN communication for main computer
	\item Development and design of \acrshort{PCB} for future CAN communication to replace the protoboard for main computer
	\item Identification of the function that relates the steering wheel position with angle of the front wheel in a bicycle model of the car.
	\item Mounting of available sensors (two  \acrshort{GNSS} unities and one \acrshort{IMU} \acrshort{9DOF})
	\item Updated code related with \acrshort{MARG} sensor.
	\item Updated code related with \acrshort{GNSS} unities.
\end{enumerate}

Although not initially planned, but because the change of hardware and/or adversities found during the fellowship, following additional work was also contributed:
\begin{enumerate}
	\tightlist
	\item Study of connections required for the main battery pack.
	\item Study of software used for management of main battery pack.
	\item Study of hardware necessary for management of main battery pack.
	\item Study and initial software development  for inverter received from \acrshort{FST}
	\item Creation of an headless structure and an AP station based on \gls{Rpi} to communicate with vehicle
	\item Initial development of an \acrshort{MQTT} based design to control the vehicle or check its status. 
	\item Development of library to interact with Schneider Altivar 71 (abandoned due to change of inverter)
	\item Developement of library to interact with Siemens CU320-2DP and respective motor modules
\end{enumerate}

Main code contributions are available under Github repository in \url{https://github.com/brtiberio/VIENA} and will be kept up to date as soon as possible.
The developed 3D pieces are also present in that repository and the companion drawings are shown in this guide also.
The developed PCB schematics and board layouts are also presented in this guide.

From initial proposed planned was not been made the calibration of \gls{MARG} sensors   neither the respective fusion filter with \gls{GNSS} sensor because is waiting for approval the acquisition of more recent sensors, which are expected to arrive in the end of year. However, for future reference, the current sensors are already installed and is also included a small description of how the calibration would be done in chapter \ref{chapter:Sensors}, if necessary. The code to interact with both sensors are also available in appendix as well as online \href{https://github.com/brtiberio/logger_AHRS}{here}.





